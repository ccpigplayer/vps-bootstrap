# VPS Bootstrap Pro 使用说明（无防火墙版）

你要求的增强已完成：

- ✅ 界面美化（颜色 + 分步骤）
- ✅ 交互优化（菜单式选择）
- ✅ 两阶段 SSH 安全切换（防锁死）
  - 阶段1：先改端口 + 禁 root，暂时保留密码登录
  - 人工验证：你在新终端验证新端口可登录
  - 阶段2：验证后再自动切到仅秘钥登录
- ✅ 日志落盘（全量审计日志 + 摘要）
  - 全量日志：`/var/log/vps-bootstrap/bootstrap-时间戳.log`
  - 摘要文件：`/var/log/vps-bootstrap/bootstrap-summary-时间戳.txt`
- ✅ Fail2ban 严格策略：10 分钟 3 次失败 -> 封禁 24 小时
- ✅ Fail2ban 自动使用你设置的新 SSH 端口
- ✅ BBR 启用
- ✅ 时区多地区选择（默认上海）
- ✅ 结束时提示新端口 + 重启建议
- ✅ 不安装防火墙（按你的要求）

---

## 运行
```bash
chmod +x server-bootstrap.sh
sudo ./server-bootstrap.sh
```

## 交互流程
1. 选择时区
2. 输入新 SSH 端口
3. 选择是否仅秘钥登录
4. 若选仅秘钥，输入用户名+公钥
5. 脚本执行第一阶段 SSH 变更
6. 你在本地新终端测试：
   `ssh -p <新端口> <用户名>@<服务器IP>`
7. 确认成功后，脚本自动执行第二阶段（关密码登录）

---

## 推荐实践
- 批量机器部署时，把日志目录集中收集，方便审计。
- 若你后续要做 GitHub 一键拉取执行，我可以再给你做：
  - 一键安装命令（curl | bash 版）
  - 多配置 profile（基础版 / 高安全版 / 开发版）
